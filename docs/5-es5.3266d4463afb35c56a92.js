function _classCallCheck(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function _defineProperties(t,e){for(var r=0;r<e.length;r++){var c=e[r];c.enumerable=c.enumerable||!1,c.configurable=!0,"value"in c&&(c.writable=!0),Object.defineProperty(t,c.key,c)}}function _createClass(t,e,r){return e&&_defineProperties(t.prototype,e),r&&_defineProperties(t,r),t}function _toConsumableArray(t){return _arrayWithoutHoles(t)||_iterableToArray(t)||_unsupportedIterableToArray(t)||_nonIterableSpread()}function _nonIterableSpread(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function _unsupportedIterableToArray(t,e){if(t){if("string"==typeof t)return _arrayLikeToArray(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);return"Object"===r&&t.constructor&&(r=t.constructor.name),"Map"===r||"Set"===r?Array.from(t):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?_arrayLikeToArray(t,e):void 0}}function _iterableToArray(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}function _arrayWithoutHoles(t){if(Array.isArray(t))return _arrayLikeToArray(t)}function _arrayLikeToArray(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,c=new Array(e);r<e;r++)c[r]=t[r];return c}(window.webpackJsonp=window.webpackJsonp||[]).push([[5],{lE2P:function(t,e,r){"use strict";r.r(e),r.d(e,"ProductModule",(function(){return pt}));var c=r("tyNb"),n=r("PCNd"),o=r("fXoL"),i=r("kt0X"),a=Object(i.n)("[Product] Toggle Product Code"),s=Object(i.n)("[Product] Set Current Product",Object(i.s)()),u=Object(i.n)("[Product] Clear Current Product"),d=Object(i.n)("[Product] Initialize Current Product"),b=Object(i.n)("[Product] Load"),l=Object(i.n)("[Product] Load Success",Object(i.s)()),p=Object(i.n)("[Product] Load Fail",Object(i.s)()),f=Object(i.n)("[Product] Update Product",Object(i.s)()),g=Object(i.n)("[Product] Update Product Success",Object(i.s)()),h=Object(i.n)("[Product] Update Product Fail",Object(i.s)()),m=Object(i.n)("[Product] Delete Product",Object(i.s)()),v=Object(i.n)("[Product] Delete Product Success",Object(i.s)()),O=Object(i.n)("[Product] Delete Product Fail",Object(i.s)()),j=Object(i.n)("[Product] Create Product",Object(i.s)()),y=Object(i.n)("[Product] Create Product Success",Object(i.s)()),C=Object(i.n)("[Product] Create Product Fail",Object(i.s)()),P=Object(i.o)("products"),R=Object(i.q)(P,(function(t){return t.showProductCode})),k=Object(i.q)(P,(function(t){return t.currentProductId})),I=Object(i.q)(P,k,(function(t,e){return 0===e?{id:0,productName:"",productCode:"New",description:"",starRating:0}:e?t.products.find((function(t){return t.id===e})):null})),Q=Object(i.q)(P,(function(t){return t.products})),w=Object(i.q)(P,(function(t){return t.error})),M=Object(i.p)({showProductCode:!0,currentProductId:null,products:[],error:""},Object(i.r)(a,(function(t){return Object.assign(Object.assign({},t),{showProductCode:!t.showProductCode})})),Object(i.r)(s,(function(t,e){return Object.assign(Object.assign({},t),{currentProductId:e.currentProductId})})),Object(i.r)(u,(function(t){return Object.assign(Object.assign({},t),{currentProductId:null})})),Object(i.r)(d,(function(t){return Object.assign(Object.assign({},t),{currentProductId:0})})),Object(i.r)(l,(function(t,e){return Object.assign(Object.assign({},t),{products:e.products,error:""})})),Object(i.r)(p,(function(t,e){return Object.assign(Object.assign({},t),{error:e.error})})),Object(i.r)(g,(function(t,e){var r=t.products.map((function(t){return e.product.id===t.id?e.product:t}));return Object.assign(Object.assign({},t),{products:r,currentProductId:e.product.id,error:""})})),Object(i.r)(h,(function(t,e){return Object.assign(Object.assign({},t),{error:e.error})})),Object(i.r)(v,(function(t,e){return Object.assign(Object.assign({},t),{products:t.products.filter((function(t){return t.id!==e.id})),currentProductId:null,error:""})})),Object(i.r)(O,(function(t,e){return Object.assign(Object.assign({},t),{error:e.error})})),Object(i.r)(y,(function(t,e){return Object.assign(Object.assign({},t),{products:[].concat(_toConsumableArray(t.products),[e.product]),currentProductId:e.product.id,error:""})})),Object(i.r)(C,(function(t,e){return Object.assign(Object.assign({},t),{error:e.error})}))),_=r("ofXK");function N(t,e){if(1&t&&(o.Pb(0),o.mc(1),o.Ob()),2&t){var r=o.bc().$implicit;o.Cb(1),o.oc(" (",r.productCode,") ")}}var S=function(t){return{active:t}};function $(t,e){if(1&t){var r=o.Sb();o.Rb(0,"button",13),o.Zb("click",(function(){o.ic(r);var t=e.$implicit;return o.bc(2).productSelected(t)})),o.cc(1,"async"),o.mc(2),o.lc(3,N,2,1,"ng-container",14),o.cc(4,"async"),o.Qb()}if(2&t){var c,n=e.$implicit,i=o.bc(2),a=o.fc(7,S,(null==n?null:n.id)===(null==(c=o.dc(1,3,i.selectedProduct$))?null:c.id));o.ec("ngClass",a),o.Cb(2),o.oc("",n.productName," "),o.Cb(1),o.ec("ngIf",o.dc(4,5,i.displayCode$))}}function F(t,e){if(1&t&&(o.Rb(0,"div",10),o.Rb(1,"div",11),o.lc(2,$,5,9,"button",12),o.cc(3,"async"),o.Qb(),o.Qb()),2&t){var r=o.bc();o.Cb(2),o.ec("ngForOf",o.dc(3,1,r.products$))}}function A(t,e){if(1&t&&(o.Rb(0,"div",15),o.mc(1),o.Qb()),2&t){var r=e.ngIf;o.Cb(1),o.oc(" Error: ",r,"\n")}}var T,E,x=((T=function(){function t(e){_classCallCheck(this,t),this.store=e,this.pageTitle="Products"}return _createClass(t,[{key:"ngOnInit",value:function(){this.products$=this.store.select(Q),this.errorMessage$=this.store.select(w),this.store.dispatch(b()),this.selectedProduct$=this.store.select(I),this.displayCode$=this.store.select(R)}},{key:"checkChanged",value:function(){this.store.dispatch(a())}},{key:"newProduct",value:function(){this.store.dispatch(d())}},{key:"productSelected",value:function(t){this.store.dispatch(s({currentProductId:t.id}))}}]),t}()).\u0275fac=function(t){return new(t||T)(o.Mb(i.h))},T.\u0275cmp=o.Gb({type:T,selectors:[["pm-product-list"]],decls:17,vars:10,consts:[[1,"card"],[1,"card-header"],["class","card-body",4,"ngIf"],[1,"card-footer"],[1,"row"],[1,"form-check","col-md-7"],["type","checkbox",1,"form-check-input",3,"checked","change"],[1,"col-md-4","text-right"],[1,"btn","btn-primary",3,"click"],["class","alert alert-danger",4,"ngIf"],[1,"card-body"],[1,"list-group"],["class","list-group-item list-group-item-action rounded-0",3,"ngClass","click",4,"ngFor","ngForOf"],[1,"list-group-item","list-group-item-action","rounded-0",3,"ngClass","click"],[4,"ngIf"],[1,"alert","alert-danger"]],template:function(t,e){1&t&&(o.Rb(0,"div",0),o.Rb(1,"div",1),o.mc(2),o.Qb(),o.lc(3,F,4,3,"div",2),o.cc(4,"async"),o.Rb(5,"div",3),o.Rb(6,"div",4),o.Rb(7,"div",5),o.Rb(8,"label"),o.Rb(9,"input",6),o.Zb("change",(function(){return e.checkChanged()})),o.cc(10,"async"),o.Qb(),o.mc(11," Display Product Code "),o.Qb(),o.Qb(),o.Rb(12,"div",7),o.Rb(13,"button",8),o.Zb("click",(function(){return e.newProduct()})),o.mc(14," Add "),o.Qb(),o.Qb(),o.Qb(),o.Qb(),o.Qb(),o.lc(15,A,2,1,"div",9),o.cc(16,"async")),2&t&&(o.Cb(2),o.oc(" ",e.pageTitle," "),o.Cb(1),o.ec("ngIf",o.dc(4,4,e.products$)),o.Cb(6),o.ec("checked",o.dc(10,6,e.displayCode$)),o.Cb(6),o.ec("ngIf",o.dc(16,8,e.errorMessage$)))},directives:[_.k,_.j,_.i],pipes:[_.b],styles:[".card-body[_ngcontent-%COMP%]{padding:0}"]}),T),q=r("3Pt+"),L=function(){function t(e){_classCallCheck(this,t),this.validationMessages=e}return _createClass(t,[{key:"processMessages",value:function(t){var e=this,r={},c=function(c){if(t.controls.hasOwnProperty(c)){var n=t.controls[c];if(n instanceof q.d){var o=e.processMessages(n);Object.assign(r,o)}else e.validationMessages[c]&&(r[c]="",(n.dirty||n.touched)&&n.errors&&Object.keys(n.errors).map((function(t){e.validationMessages[c][t]&&(r[c]+=e.validationMessages[c][t]+" ")})))}};for(var n in t.controls)c(n);return r}}]),t}(),U=function(){function t(){_classCallCheck(this,t)}return _createClass(t,null,[{key:"range",value:function(t,e){return function(r){return r.value&&(isNaN(r.value)||r.value<t||r.value>e)?{range:!0}:null}}}]),t}(),Z=r("vkgz"),D=r("tk/3"),J=r("z6cu"),V=r("JIr8"),G=r("lJxs"),z=((E=function(){function t(e){_classCallCheck(this,t),this.http=e,this.productsUrl="api/products"}return _createClass(t,[{key:"getProducts",value:function(){return this.http.get(this.productsUrl).pipe(Object(Z.a)((function(t){return console.log(JSON.stringify(t))})),Object(V.a)(this.handleError))}},{key:"createProduct",value:function(t){var e=new D.d({"Content-Type":"application/json"}),r=Object.assign(Object.assign({},t),{id:null});return this.http.post(this.productsUrl,r,{headers:e}).pipe(Object(Z.a)((function(t){return console.log("createProduct: "+JSON.stringify(t))})),Object(V.a)(this.handleError))}},{key:"deleteProduct",value:function(t){var e=new D.d({"Content-Type":"application/json"});return this.http.delete("".concat(this.productsUrl,"/").concat(t),{headers:e}).pipe(Object(Z.a)((function(e){return console.log("deleteProduct: "+t)})),Object(V.a)(this.handleError))}},{key:"updateProduct",value:function(t){var e=new D.d({"Content-Type":"application/json"});return this.http.put("".concat(this.productsUrl,"/").concat(t.id),t,{headers:e}).pipe(Object(Z.a)((function(){return console.log("updateProduct: "+t.id)})),Object(G.a)((function(){return t})),Object(V.a)(this.handleError))}},{key:"handleError",value:function(t){var e;return e=t.error instanceof ErrorEvent?"An error occurred: "+t.error.message:"Backend returned code ".concat(t.status,": ").concat(t.body.error),console.error(t),Object(J.a)(e)}}]),t}()).\u0275fac=function(t){return new(t||E)(o.Vb(D.b))},E.\u0275prov=o.Ib({token:E,factory:E.\u0275fac,providedIn:"root"}),E);function X(t,e){if(1&t&&(o.Rb(0,"span",22),o.mc(1),o.Qb()),2&t){var r=o.bc(2);o.Cb(1),o.oc(" ",r.displayMessage.productName," ")}}function H(t,e){if(1&t&&(o.Rb(0,"span",22),o.mc(1),o.Qb()),2&t){var r=o.bc(2);o.Cb(1),o.oc(" ",r.displayMessage.productCode," ")}}function K(t,e){if(1&t&&(o.Rb(0,"span",22),o.mc(1),o.Qb()),2&t){var r=o.bc(2);o.Cb(1),o.oc(" ",r.displayMessage.starRating," ")}}function W(t,e){if(1&t&&(o.Rb(0,"span",22),o.mc(1),o.Qb()),2&t){var r=o.bc(2);o.Cb(1),o.oc(" ",r.displayMessage.description," ")}}var B=function(t){return{"is-invalid":t}};function Y(t,e){if(1&t){var r=o.Sb();o.Rb(0,"div",2),o.Rb(1,"div",3),o.mc(2),o.Qb(),o.Rb(3,"div",4),o.Rb(4,"form",5),o.Zb("ngSubmit",(function(){o.ic(r);var t=e.ngIf;return o.bc().saveProduct(t)})),o.Rb(5,"fieldset"),o.Rb(6,"div",6),o.Rb(7,"label",7),o.mc(8,"Product Name"),o.Qb(),o.Rb(9,"div",8),o.Rb(10,"input",9),o.Zb("blur",(function(){return o.ic(r),o.bc().blur()})),o.Qb(),o.lc(11,X,2,1,"span",10),o.Qb(),o.Qb(),o.Rb(12,"div",6),o.Rb(13,"label",11),o.mc(14,"Product Code"),o.Qb(),o.Rb(15,"div",8),o.Rb(16,"input",12),o.Zb("blur",(function(){return o.ic(r),o.bc().blur()})),o.Qb(),o.lc(17,H,2,1,"span",10),o.Qb(),o.Qb(),o.Rb(18,"div",6),o.Rb(19,"label",13),o.mc(20,"Star Rating (1-5)"),o.Qb(),o.Rb(21,"div",8),o.Nb(22,"input",14),o.lc(23,K,2,1,"span",10),o.Qb(),o.Qb(),o.Rb(24,"div",6),o.Rb(25,"label",15),o.mc(26,"Description"),o.Qb(),o.Rb(27,"div",8),o.Rb(28,"textarea",16),o.mc(29,"            "),o.Qb(),o.lc(30,W,2,1,"span",10),o.Qb(),o.Qb(),o.Rb(31,"div",17),o.Rb(32,"div",18),o.Rb(33,"span"),o.Rb(34,"button",19),o.mc(35," Save "),o.Qb(),o.Qb(),o.Rb(36,"span"),o.Rb(37,"button",20),o.Zb("click",(function(){return o.ic(r),o.bc().cancelEdit()})),o.mc(38," Cancel "),o.Qb(),o.Qb(),o.Rb(39,"span"),o.Rb(40,"button",21),o.Zb("click",(function(){o.ic(r);var t=e.ngIf;return o.bc().deleteProduct(t)})),o.mc(41," Delete "),o.Qb(),o.Qb(),o.Qb(),o.Qb(),o.Qb(),o.Qb(),o.Qb(),o.Qb()}if(2&t){var c=o.bc();o.Cb(2),o.oc(" ",c.pageTitle," "),o.Cb(2),o.ec("formGroup",c.productForm),o.Cb(6),o.ec("ngClass",o.fc(11,B,c.displayMessage.productName)),o.Cb(1),o.ec("ngIf",c.displayMessage.productName),o.Cb(5),o.ec("ngClass",o.fc(13,B,c.displayMessage.productCode)),o.Cb(1),o.ec("ngIf",c.displayMessage.productCode),o.Cb(5),o.ec("ngClass",o.fc(15,B,c.displayMessage.starRating)),o.Cb(1),o.ec("ngIf",c.displayMessage.starRating),o.Cb(5),o.ec("ngClass",o.fc(17,B,c.displayMessage.description)),o.Cb(2),o.ec("ngIf",c.displayMessage.description),o.Cb(4),o.ec("disabled",!c.productForm.valid||!c.productForm.dirty)}}function tt(t,e){if(1&t&&(o.Rb(0,"div",23),o.mc(1),o.Qb()),2&t){var r=o.bc();o.Cb(1),o.oc(" Error: ",r.errorMessage,"\n")}}var et,rt,ct,nt,ot=((rt=function(){function t(e,r,c){_classCallCheck(this,t),this.store=e,this.fb=r,this.productService=c,this.pageTitle="Product Edit",this.errorMessage="",this.displayMessage={},this.validationMessages={productName:{required:"Product name is required.",minlength:"Product name must be at least three characters.",maxlength:"Product name cannot exceed 50 characters."},productCode:{required:"Product code is required."},starRating:{range:"Rate the product between 1 (lowest) and 5 (highest)."}},this.genericValidator=new L(this.validationMessages)}return _createClass(t,[{key:"ngOnInit",value:function(){var t=this;this.productForm=this.fb.group({productName:["",[q.m.required,q.m.minLength(3),q.m.maxLength(50)]],productCode:["",q.m.required],starRating:["",U.range(1,5)],description:""}),this.product$=this.store.select(I).pipe(Object(Z.a)((function(e){return t.displayProduct(e)}))),this.productForm.valueChanges.subscribe((function(){return t.displayMessage=t.genericValidator.processMessages(t.productForm)}))}},{key:"blur",value:function(){this.displayMessage=this.genericValidator.processMessages(this.productForm)}},{key:"displayProduct",value:function(t){t&&(this.productForm.reset(),this.pageTitle=0===t.id?"Add Product":"Edit Product: "+t.productName,this.productForm.patchValue({productName:t.productName,productCode:t.productCode,starRating:t.starRating,description:t.description}))}},{key:"cancelEdit",value:function(){this.displayProduct(null),this.store.dispatch(u())}},{key:"deleteProduct",value:function(t){t&&t.id?confirm("Really delete the product: ".concat(t.productName,"?"))&&this.store.dispatch(m({id:t.id})):this.store.dispatch(u())}},{key:"saveProduct",value:function(t){if(this.productForm.valid&&this.productForm.dirty){var e=Object.assign(Object.assign({},t),this.productForm.value);this.store.dispatch(0===e.id?j({product:e}):f({product:e}))}}}]),t}()).\u0275fac=function(t){return new(t||rt)(o.Mb(i.h),o.Mb(q.b),o.Mb(z))},rt.\u0275cmp=o.Gb({type:rt,selectors:[["pm-product-edit"]],decls:3,vars:4,consts:[["class","card",4,"ngIf"],["class","alert alert-danger",4,"ngIf"],[1,"card"],[1,"card-header"],[1,"card-body"],["novalidate","",3,"formGroup","ngSubmit"],[1,"form-group","row"],["for","productNameId",1,"col-md-3","col-form-label"],[1,"col-md-9"],["id","productNameId","type","text","placeholder","Name (required)","formControlName","productName",1,"form-control",3,"ngClass","blur"],["class","invalid-feedback",4,"ngIf"],["for","productCodeId",1,"col-md-3","col-form-label"],["id","productCodeId","type","text","placeholder","Code (required)","formControlName","productCode",1,"form-control",3,"ngClass","blur"],["for","starRatingId",1,"col-md-3","col-form-label"],["id","starRatingId","type","text","placeholder","Rating","formControlName","starRating",1,"form-control",3,"ngClass"],["for","descriptionId",1,"col-md-3","col-form-label"],["id","descriptionId","placeholder","Description","rows","3","formControlName","description",1,"form-control",3,"ngClass"],[1,"form-group"],[1,"col-md-10","col-md-offset-2"],["type","submit",1,"btn","btn-primary",2,"width","80px","margin-right","10px",3,"disabled"],["type","button",1,"btn","btn-light",2,"width","80px","margin-right","10px",3,"click"],["type","button",1,"btn","btn-light",2,"width","80px",3,"click"],[1,"invalid-feedback"],[1,"alert","alert-danger"]],template:function(t,e){1&t&&(o.lc(0,Y,42,19,"div",0),o.cc(1,"async"),o.lc(2,tt,2,1,"div",1)),2&t&&(o.ec("ngIf",o.dc(1,2,e.product$)),o.Cb(2),o.ec("ngIf",e.errorMessage))},directives:[_.k,q.n,q.h,q.e,q.a,q.g,q.c,_.i],pipes:[_.b],encapsulation:2}),rt),it=((et=function(){function t(){_classCallCheck(this,t)}return _createClass(t,[{key:"ngOnInit",value:function(){}}]),t}()).\u0275fac=function(t){return new(t||et)},et.\u0275cmp=o.Gb({type:et,selectors:[["ng-component"]],decls:5,vars:0,consts:[[1,"row"],[1,"col-md-4"],[1,"col-md-8"]],template:function(t,e){1&t&&(o.Rb(0,"div",0),o.Rb(1,"div",1),o.Nb(2,"pm-product-list"),o.Qb(),o.Rb(3,"div",2),o.Nb(4,"pm-product-edit"),o.Qb(),o.Qb())},directives:[x,ot],encapsulation:2}),et),at=r("snw9"),st=r("LRne"),ut=r("5+tZ"),dt=r("bOdf"),bt=((ct=function t(e,r){var c=this;_classCallCheck(this,t),this.actions$=e,this.productService=r,this.loadProducts$=Object(at.c)((function(){return c.actions$.pipe(Object(at.d)(b),Object(ut.a)((function(){return c.productService.getProducts().pipe(Object(G.a)((function(t){return l({products:t})})),Object(V.a)((function(t){return Object(st.a)(p({error:t}))})))})))})),this.updateProduct$=Object(at.c)((function(){return c.actions$.pipe(Object(at.d)(f),Object(dt.a)((function(t){return c.productService.updateProduct(t.product).pipe(Object(G.a)((function(t){return g({product:t})})),Object(V.a)((function(t){return Object(st.a)(h({error:t}))})))})))})),this.deleteProduct$=Object(at.c)((function(){return c.actions$.pipe(Object(at.d)(m),Object(ut.a)((function(t){return c.productService.deleteProduct(t.id).pipe(Object(G.a)((function(){return v({id:t.id})}),Object(V.a)((function(t){return Object(st.a)(O({error:t}))}))))})))})),this.createProduct$=Object(at.c)((function(){return c.actions$.pipe(Object(at.d)(j),Object(dt.a)((function(t){return c.productService.createProduct(t.product).pipe(Object(G.a)((function(t){return y({product:t})}),Object(V.a)((function(t){return Object(st.a)(C({error:t}))}))))})))}))}).\u0275fac=function(t){return new(t||ct)(o.Vb(at.a),o.Vb(z))},ct.\u0275prov=o.Ib({token:ct,factory:ct.\u0275fac}),ct),lt=[{path:"",component:it}],pt=((nt=function t(){_classCallCheck(this,t)}).\u0275mod=o.Kb({type:nt}),nt.\u0275inj=o.Jb({factory:function(t){return new(t||nt)},imports:[[n.a,c.d.forChild(lt),i.j.forFeature("products",M),at.b.forFeature([bt])]]}),nt)}}]);